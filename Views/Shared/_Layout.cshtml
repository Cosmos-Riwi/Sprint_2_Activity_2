<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - El Rincón del Sabor</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/GestionRestaurante.styles.css" asp-append-version="true" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .navbar-brand {
            font-weight: bold;
            color: #d4af37 !important;
        }
        .navbar {
            background: linear-gradient(135deg, #2c3e50, #34495e) !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-link {
            color: #ecf0f1 !important;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            color: #d4af37 !important;
            transform: translateY(-2px);
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #1f4e79);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            border: none;
            border-radius: 25px;
        }
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border: none;
            border-radius: 25px;
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: none;
            border-radius: 25px;
        }
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            border: none;
            border-radius: 25px;
        }
        .table {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .table thead th {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            border: none;
            font-weight: 600;
        }
        .table tbody tr {
            transition: background-color 0.3s ease;
        }
        .table tbody tr:hover {
            background-color: #f8f9fa;
        }
        .form-control {
            border-radius: 10px;
            border: 2px solid #ecf0f1;
            transition: all 0.3s ease;
        }
        .form-control:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
        }
        .form-label {
            font-weight: 600;
            color: #2c3e50;
        }
        .alert {
            border-radius: 10px;
            border: none;
        }
        .footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            margin-top: 50px;
        }
        .page-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 30px 0;
            margin-bottom: 30px;
            border-radius: 0 0 20px 20px;
        }
        .icon {
            margin-right: 8px;
        }
        
        /* Toast dinámico mejorado */
        .success-toast {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideInLeft 0.5s ease-out, pulse 2s ease-in-out 0.5s;
            overflow: hidden;
        }
        
        .bg-gradient-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            position: relative;
        }
        
        .success-icon-container {
            position: relative;
            display: inline-block;
        }
        
        .success-icon {
            animation: bounceIn 0.6s ease-out, rotate 0.8s ease-out 0.3s;
            font-size: 1.2rem;
        }
        
        .success-message {
            position: relative;
        }
        
        .message-text {
            font-weight: 500;
            margin-bottom: 8px;
            animation: fadeInUp 0.5s ease-out 0.2s both;
        }
        
        .progress-bar-container {
            height: 3px;
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 2px;
            animation: progressBar 4s linear forwards;
            transform-origin: left;
        }
        
        /* Animaciones */
        @@keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @@keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @@keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        @@keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }
        
        @@keyframes fadeInUp {
            from {
                transform: translateY(10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @@keyframes progressBar {
            from {
                transform: scaleX(1);
            }
            to {
                transform: scaleX(0);
            }
        }
        
        /* Efecto de brillo en el header */
        .bg-gradient-success::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shine 2s ease-in-out 0.5s;
        }
        
        @@keyframes shine {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }
        
        /* Hover effects */
        .success-toast:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
    </style>
</head>
<body style="background-color: #f8f9fa;">
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">
                    <i class="fas fa-utensils icon"></i>El Rincón del Sabor
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-lg-inline-flex justify-content-between">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">
                                <i class="fas fa-home icon"></i>Inicio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Clientes" asp-action="Index">
                                <i class="fas fa-users icon"></i>Clientes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Meseros" asp-action="Index">
                                <i class="fas fa-user-tie icon"></i>Meseros
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Platos" asp-action="Index">
                                <i class="fas fa-utensils icon"></i>Platos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Pedidos" asp-action="Index">
                                <i class="fas fa-shopping-cart icon"></i>Pedidos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Reservas" asp-action="Index">
                                <i class="fas fa-calendar-alt icon"></i>Reservas
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="container-fluid">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
        
        <!-- Toast de confirmación dinámico -->
        @if (TempData["Success"] != null)
        {
            <div class="toast-container position-fixed top-0 start-0 p-3" style="z-index: 1055;">
                <div class="toast success-toast show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-gradient-success text-white">
                        <div class="success-icon-container">
                            <i class="fas fa-check-circle success-icon"></i>
                        </div>
                        <strong class="me-auto">¡Éxito!</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        <div class="success-message">
                            <div class="message-text">@TempData["Success"]</div>
                            <div class="progress-bar-container">
                                <div class="progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    <footer class="footer text-center py-4">
        <div class="container">
            <p class="mb-0">&copy; 2025 - El Rincón del Sabor - Sistema de Gestión de Restaurante</p>
        </div>
    </footer>
    
    @await RenderSectionAsync("Styles", required: false)
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    
    <script>
        // Toast dinámico mejorado
        document.addEventListener('DOMContentLoaded', function() {
            var toastElement = document.querySelector('.success-toast');
            if (toastElement) {
                // Agregar efectos de sonido visuales
                toastElement.addEventListener('show.bs.toast', function() {
                    // Efecto de partículas (simulado con CSS)
                    this.style.setProperty('--particle-delay', '0s');
                });
                
                var toast = new bootstrap.Toast(toastElement, {
                    autohide: true,
                    delay: 4500 // Sincronizado con la barra de progreso
                });
                
                // Mostrar con animación personalizada
                setTimeout(() => {
                    toast.show();
                    
                    // Efecto de confeti simulado
                    createConfettiEffect();
                }, 100);
            }
        });
        
        // Función para efecto de confeti simulado
        function createConfettiEffect() {
            const container = document.querySelector('.toast-container');
            if (!container) return;
            
            for (let i = 0; i < 8; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: absolute;
                    width: 6px;
                    height: 6px;
                    background: ${['#28a745', '#20c997', '#ffffff'][Math.floor(Math.random() * 3)]};
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 1060;
                    animation: confettiFall 2s ease-out forwards;
                    left: ${Math.random() * 300}px;
                    top: 10px;
                `;
                container.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 2000);
            }
        }
        
        // Agregar animación de confeti al CSS
        const style = document.createElement('style');
        style.textContent = `
            @@keyframes confettiFall {
                0% {
                    transform: translateY(0) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(200px) rotate(360deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
